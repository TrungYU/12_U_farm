<!DOCTYPE html>
<html>
<head>
    <title>U-Farm List Of Orders</title>
    <link rel="stylesheet" type="text/css" href="css/main_style_sheet.css"/>
    <link rel="stylesheet" type="text/css" href="css/seller_hub_style_sheet.css"/>
</head>
<body>
    <div class="topbar">

    </div>
    
    <div class="navbar">
        <center>
        <a href="index.html">About</a>
        <a href="marketplace.html">Market Place</a>
        <a href="#farmers">Farmers</a>
        <a href="Contact_Us.html">Contact Us</a>
        </center>
    </div>
    
    <div class="sidenav">
        <!-- <input type="checkbox" name="" value=""><br> -->
        <ul>
            <li><a class="sideNavHeaders" href="SellerHub.html">Overview</a></li>
            <li><a class="sideNavHeaders" href="#mylistings">My Listings</a></li>
            <li><a class="sideNavHeaders" href="#orders">Orders</a>
                <ul>
                    <li><a class="sideNavSubHeaders" id="allorders" href="orders.html">All Orders</a></li>
                    <li><a class="sideNavSubHeaders" id="dailyorders" href="ordersbyday.html">Daily Details</a></li>
                </ul>
            </li>
            <li><a class="sideNavHeaders" href="#ratings">Ratings</a></li>
            <li><a class="sideNavHeaders" href="#performance">Performance</a></li>
        </ul>
    <!-- https://www.w3schools.com/tags/tryit.asp?filename=tryhtml_input_checked -->
    <!-- Check box and form tutorial -->
        
    </div>
    <div class="bottombar">
        
    </div>

    <div class="main">
        <h1>Daily Details - <span id="titledate"></span></h1>
        <div id="dailyOrderTable">
            <table class="orderTable" id="dailyDetails">
                <tr>
                    <th>Order Month</th>
                    <th>Order Day</th>
                    <th>Order Year</th>
                    <th>Order Number
                        <div class="sortarrows">
                            <div class="uparrow" id="onuarrow"></div>
                            <div class="downarrow" id="ondarrow"></div>
                        </div>
                    </th>
                    <th>Produce
                        <div class="sortarrows">
                            <div class="uparrow" id="puarrow"></div>
                            <div class="downarrow" id="pdarrow"></div>
                        </div>
                    </th>
                    <th>Quantity
                        <div class="sortarrows">
                            <div class="uparrow" id="quarrow"></div>
                            <div class="downarrow" id="qdarrow"></div>
                        </div>
                    </th>
                    <th>Customer Name
                        <div class="sortarrows">
                            <div class="uparrow" id="cnuarrow"></div>
                            <div class="downarrow" id="cndarrow"></div>
                        </div>
                    </th>
                    <th>Pickup Time
                        <div class="sortarrows">
                            <div class="uparrow" id="ptuarrow"></div>
                            <div class="downarrow" id="ptdarrow"></div>
                        </div>
                    </th>
                </tr>
                <tr>
                    <td>2</td>
                    <td>25</td>
                    <td>2019</td>
                    <td>#17534</td>
                    <td>Various</td>
                    <td>7 lbs</td>
                    <td>Nicole S.</td>
                    <td>8:00 AM</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>24</td>
                    <td>2019</td>
                    <td>#17554</td>
                    <td>Potatoes</td>
                    <td>3 lbs</td>
                    <td>Jon S.</td>
                    <td>9:30 AM</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>26</td>
                    <td>2019</td>
                    <td>#17569</td>
                    <td>Various</td>
                    <td>5 lbs</td>
                    <td>Mike M.</td>
                    <td>10:30 AM</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>26</td>
                    <td>2019</td>
                    <td>#17568</td>
                    <td>Various</td>
                    <td>33.5 lbs</td>
                    <td>Restaurant X</td>
                    <td>11:00 AM</td>
                </tr>
            </table> 
        </div>
        <div id="calendardiv">   
            <table id="calendartable">
                <tr id="calendarmonth">
                    <th id="month" colspan="7">
                        <div id="leftarrow"></div>
                        <span id="selectedmonth"></span>
                        <span> </span>
                        <span id="selectedyear"></span>
                        <div id="rightarrow"></div>
                    </th>
                </tr>
                <tr id="calendarday">
                    <td>Sun</td>
                    <td>Mon</td>
                    <td>Tue</td>
                    <td>Wed</td>
                    <td>Thu</td>
                    <td>Fri</td>
                    <td>Sat</td>
                </tr>
            </table>
        </div>
    </div>
        <script>

            let dict_of_months = {0: "January", 1: "February", 2: "March", 3: "April",
                                  4: "May", 5: "June", 6: "July", 7: "August", 8: "September",
                                  9: "October", 10: "November", 11: "December"};
            
            let selecteddate;

            function createCalendar() {
                let week = 1;
                let day = 1;
                for (i = 0; i <= 5; i++) {
                    let tr = document.createElement("tr");
                    tr.id = "week" + week;
                    document.getElementById("calendartable").appendChild(tr);
                    for (j = 0; j <= 6; j++) {
                        let td = document.createElement("td");
                        td.id = "day" + day;
                        document.getElementById("week" + week).appendChild(td);
                        td.style.cursor = "pointer";
                        td.onclick = function() {
                            document.getElementById(selecteddate).style.fontWeight = "normal";
                            current_date = td.innerHTML;
                            selecteddate = td.id;
                            document.getElementById(td.id).style.fontWeight = "bold";
                            setMainDate();
                            setCalendarDate();
                            filterTable();
                        }
                        day++;
                    }
                    week++;
                }
            }

            function buildCalendar() {
                let earliestdate = current_date%7;
                let earliestday = 8 - earliestdate + current_day;
                let firstday = 1;
                if (earliestday > 6) {
                    earliestday -= 7;
                }
                for (i = 1; i <= days_in_current_month; i++) {
                    document.getElementById("day" + (i + earliestday)).innerHTML = i;
                    document.getElementById("day" + (i + earliestday)).style.color = "black";
                    if (i == current_date) {
                        document.getElementById("day" + (i + earliestday)).style.fontWeight = "bold";
                        selecteddate = document.getElementById("day" + (i + earliestday)).id;
                    }
                }
                for (i = 0; i < earliestday; i++) {
                    document.getElementById("day" + (earliestday - i)).innerHTML = days_in_previous_month - i;
                    document.getElementById("day" + (earliestday - i)).style.color = "lightgray";
                }
                for (i = days_in_current_month + 1; i + earliestday <= 42; i++) {
                    document.getElementById("day" + (i + earliestday)).innerHTML = firstday;
                    document.getElementById("day" + (i + earliestday)).style.color = "lightgray";
                    firstday++;
                }
                if (document.getElementById("day36").style.color == "lightgray") {
                    document.getElementById("week6").style.display = "none";
                }
                else {
                    document.getElementById("week6").style.display = "table-row";
                }

            }

            function leftarrowclick () {
                if (current_month > 0) {
                    current_month -= 1;
                }
                else {
                    current_month = 11;
                    current_year -= 1;
                }
                document.getElementById(selecteddate).style.fontWeight = "normal";
                current_date = 1;
                date = new Date(current_year, current_month, current_date);
                current_day = date.getDay();
                days_in_current_month = new Date(current_year, current_month + 1, 0).getDate();
                days_in_previous_month = new Date(current_year, current_month, 0).getDate();
                buildCalendar();
                setCalendarDate();
            }

            function rightarrowclick () {
                if (current_month < 11) {
                    current_month += 1;
                }
                else {
                    current_month = 0;
                    current_year += 1;
                }
                document.getElementById(selecteddate).style.fontWeight = "normal";
                current_date = 1;
                date = new Date(current_year, current_month, current_date);
                current_day = date.getDay();
                days_in_current_month = new Date(current_year, current_month + 1, 0).getDate();
                days_in_previous_month = new Date(current_year, current_month, 0).getDate();
                buildCalendar();
                setCalendarDate();
            }
            
            function setMainDate () {
                document.getElementById("titledate").innerHTML = dict_of_months[current_month] + " " + current_date.toString() + " " + current_year.toString();
            }
            function setCalendarDate () {
                document.getElementById("selectedmonth").innerHTML = dict_of_months[current_month];
                document.getElementById("selectedyear").innerHTML = current_year;
            }

            function filterTable() {
                table = document.getElementById("dailyDetails");
                row = table.getElementsByTagName("tr");
                for (i = 1; i < row.length; i++) {
                    order = row[i].getElementsByTagName("td");
                    if (order[0].innerHTML == current_month && order[1].innerHTML == current_date && order[2].innerHTML == current_year) {
                        row[i].style.display = "table-row";
                    } 
                    else {
                        row[i].style.display = "none";
                    }
                }
            }

            document.getElementById("dailyorders").style.fontWeight = "bold";
            document.getElementById("ptuarrow").style.borderBottomColor = "grey";
            let date = new Date();
            let current_month = date.getMonth();
            let current_date = date.getDate();
            let current_year = date.getFullYear();
            let current_day = date.getDay();
            let days_in_current_month = new Date(current_year, current_month + 1, 0).getDate();
            let days_in_previous_month = new Date(current_year, current_month, 0).getDate();
            createCalendar();
            buildCalendar();
            setMainDate();
            setCalendarDate();
            filterTable();

            document.getElementById("leftarrow").onclick = leftarrowclick;
            document.getElementById("rightarrow").onclick = rightarrowclick;

        </script>
    </form>
</body>
</html>

